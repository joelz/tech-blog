<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Notes by Joel</title><link>https://joelz.github.io/tech-blog/posts/</link><description>Recent content in Posts on Notes by Joel</description><generator>Hugo</generator><language>en-us</language><copyright>Copy, right? 🤔</copyright><lastBuildDate>Fri, 03 Nov 2023 12:01:58 +0800</lastBuildDate><atom:link href="https://joelz.github.io/tech-blog/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>读书笔记：OReilly.TypeScript.Cookbook.2023.8.epub</title><link>https://joelz.github.io/tech-blog/posts/20231103-typescript_cookbook_2023_book_notes/</link><pubDate>Fri, 03 Nov 2023 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20231103-typescript_cookbook_2023_book_notes/</guid><description>4.8 Using ThisType to Define this in Objects Problem: Your app requires complex configuration objects with methods, where this has a different context depending on usage.
Solution: Use the built-in generic ThisType&amp;lt;T&amp;gt; to define the correct this.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 // An object of functions .</description></item><item><title>短信链接拉起 app 方案</title><link>https://joelz.github.io/tech-blog/posts/20230815-android_app_links/</link><pubDate>Tue, 15 Aug 2023 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20230815-android_app_links/</guid><description>需求 短信链接拉起app，去到app的某个特定页面。
结论 iOS 上采用 Universal Links，Android 上采用 URL Scheme(非https/http)。落地页统一使用 Universal Links 指向的 app 下载页。如果考虑到用户可能没有安装 app，那 https://www.kerryplus.com/ulink/ 需要返回页面（一般就是一个app下载页），这个页面上再执行 android 端的 url scheme 拉起app，类似这样的代码：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /** * 检查是否从短信中需拉起app的链接进入，如果是，且在 Anroid 上，则尝试拉起 app */ function checkAppDeepLink() { const platform = getMobileOperatingSystem(); const href = location.href; const index = href.indexOf(&amp;#39;/ulink/&amp;#39;); if (index &amp;gt; -1) { const param = href.</description></item><item><title>支付宝小程序导航栏自定义方案</title><link>https://joelz.github.io/tech-blog/posts/20230720-mp_alipay_navigation-bar/</link><pubDate>Thu, 20 Jul 2023 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20230720-mp_alipay_navigation-bar/</guid><description>先看支付宝小程序文档怎么说 导航栏背景色 // 若在 app.json 中的 window 中配置，则对全局页面生效 &amp;#34;window&amp;#34;: { &amp;#34;titleBarColor&amp;#34;: &amp;#34;#FFFFFF&amp;#34; }, // 若在 page.json 中配置，则对当前页面生效 { &amp;#34;titleBarColor&amp;#34;: &amp;#34;#FFFFFF&amp;#34; } // 也可以使用 my.setNavigationBar() 设置当前页面的导航栏的背景色 my.setNavigationBar({ backgroundColor: &amp;#34;#FFFFFF&amp;#34; }) 导航栏前景色（状态栏文字、按钮、以及标题的颜色） // frontColor必须和backgroundColor一起设置才能生效； // 导航栏背景色会影响导航栏前景色。 若只设置导航栏背景色，则当背景色为 #ffffff时，前景色为黑色，否则前景色为白色。 my.setNavigationBar({ frontColor: &amp;#39;#ffffff&amp;#39;, backgroundColor: &amp;#39;#000000&amp;#39; }) https://opendocs.alipay.com/mini/007l6m?pathHash=3b919f4b:
字体颜色、返回按钮颜色属于导航栏前景色。前景色仅支持 #ffffff 和 #000000。 可以通过 my.setNavigationBar 入参 frontColor 直接修改导航栏前景色（基础库 2.7.24 开始支持） 也可通过 my.setNavigationBar 入参 backgroundColor 间接影响导航栏前景色。即当 backgroundColor 为白色时，前景色为黑色；当 backgroundColor 为其他颜色时，前景色为白色。
两种方案 方案1: title 用支付宝原生的 背景色不透明 默认就好。
背景色透明 uniapp 的 pages.</description></item><item><title>Iconfont使用笔记</title><link>https://joelz.github.io/tech-blog/posts/20220429-iconfont/</link><pubDate>Fri, 29 Apr 2022 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20220429-iconfont/</guid><description>iconfont 原理 iconfont 字体生成原理及使用技巧 - iconfont.cn
创建字体文件 方式1: 使用 iconfont.cn iconfont.cn 是阿里出品的 iconfont 管理平台。在 iconfont.cn 新建一个项目，上传 svg，可以生成字体文件和相应的 css。生成的字体文件和 css 可以下载，也可直接引用 iconfont.cn 提供的 alicdn 地址。
方式2: 使用 font-carrier font-carrier 是一个功能强大的字体操作库，使用它你可以随心所欲地操作字体。
font-carrier 封装了简单的 API，可以将 SVG 设置成对应的字形，支持导出5种浏览器主流字体（ttf，eot，woff，woff2，svg）
使用 iconfont 方式1: unicode 模式 1 2 3 4 5 6 7 8 9 10 11 12 13 14 @font-face { font-family: &amp;#39;iconfontKIP&amp;#39;; /* 自定义字体族名，可以是任意名， */ src: url(&amp;#39;//at.alicdn.com/t/font_1357308_kygursq6jw.eot&amp;#39;); /* 字体描述文件链接 */ src: url(&amp;#39;//at.alicdn.com/t/font_1357308_kygursq6jw.eot?#iefix&amp;#39;) format(&amp;#39;embedded-opentype&amp;#39;), /* 兼容 IE9 */ url(&amp;#39;//at.</description></item><item><title>小程序及App内嵌H5</title><link>https://joelz.github.io/tech-blog/posts/20220418-weixin_mp_webview/</link><pubDate>Mon, 18 Apr 2022 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20220418-weixin_mp_webview/</guid><description>微信小程序内嵌 H5 通信机制 微信小程序向 H5 发送消息 URL search 传参：在 H5 初始加载时，通常会带上用户的登录态作为参数，使 H5 可以继续与后台交互。类似 https://example.com/h5.html?token=SGVsbG9Xb3JkIQ== URL hash 传参：在 H5 浏览期间，可以 利用网页 URL 中的 hash 部分改变不会导致网页重新加载的特点，实现小程序向 H5 发送消息。但是：【报Bug】UNIAPP H5修改hash模式的URL参数会导致页面重载，以前旧的hbx2.8.11是不会重载的 - DCloud问答 websocket H5 向微信小程序发送消息 postMessage：小程序内嵌 H5 可以使用 JSSDK 向小程序发送消息。网页向小程序 postMessage 时，只会在特定时机（小程序后退、组件销毁、分享）触发并收到消息，不是实时触发。e.detail = { data }，data是多次 postMessage 的参数组成的数组 路由传参：在使用 JSSDK 调起小程序页面时，可以通过在页面路径后携带参数的方式通信。类似 wx.miniProgram.navigateTo({ url: '/path/to/page?foo=bar' }) websocket 不足 对于需要用户交互才能使用的小程序能力（比如分享，获取用户手机号，获取用户信息，获取用户头像，订阅消息等），需要跳转页面 WebView 页面的导航栏只能固定用默认的白底黑字风格 参考链接 微信小程序混合开发笔记 微信小程序+webview+vue混合开发 传值踩坑_choutian5268的博客-CSDN博客 【报Bug】UNIAPP H5修改hash模式的URL参数会导致页面重载，以前旧的hbx2.8.11是不会重载的 - DCloud问答 - web-view | 微信开放文档 App内嵌 H5 通信机制 App向 H5 发送消息 evalJS： 1 2 3 4 5 const js = `window.</description></item><item><title>vue web app 接入 Azure AD SSO</title><link>https://joelz.github.io/tech-blog/posts/20211208-vue_azure_ad_sso/</link><pubDate>Wed, 08 Dec 2021 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20211208-vue_azure_ad_sso/</guid><description>第三方应用接入Azure AD SSO流程 确定账号体系的对应关系（SP 中的账号和 AAD 中的哪个字段对应） 确定接入协议（SAML 还是 OAuth） 确定 SP 中有哪些类型的应用要集成（SAP，Web App，Web API，Desktop，Mobile） 确定接入方案 新建 dev AAD 的application，创建配置 SP 方开发和测试 （可选）有些事项需要找香港同事确认 PROD AAD 配置 SP 方测试 PROD AAD 配置无误 上线 OAuth in Azure AD SSO_in_Azure_AD_using_OAuth_OIDC_20220520.pptx
default access token 是 jwt，但是无法验证签名 Invalid signature validation - Invalid signature while validating Azure ad access token, but id token works - Stack Overflow
OIDC in OAuth Diagrams of All The OpenID Connect Flows | by Takahiko Kawasaki | Medium</description></item><item><title>uni-app 多端项目接入阿里云 ARMS</title><link>https://joelz.github.io/tech-blog/posts/20211105-aliyun_arms/</link><pubDate>Fri, 05 Nov 2021 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20211105-aliyun_arms/</guid><description>官方文档 App监控概述 前端监控文档导读 什么是ARMS前端监控？ vue项目如何引入 alife-logger - npm 如何引入阿里云ARMS前端监控？ · Issue #102 · FrankKai/FrankKai.github.io · GitHub GitHub - rochzp/vue-arms: 基于阿里ARMS的Vue插件 uniapp如何引入 H5：同vue项目处理方式。 小程序：小程序方式。 app：和小程序处理方式一致。然后request那里是无法自动上报的，要手动上报。 uniapp开发的微信小程序可以集成阿里云arms前端监控吗 Taro(mpvue/uniapp)引入Arms阿里前端监控 - Sushome 开始监控微信小程序 webfunny前端监控平台新增功能教程：获取小程序、uni-app探针安装 - 掘金 (9条消息) 原生h5添加阿里云ARMS前端监控__小郑有点困了的博客-CSDN博客 生命周期 - uni-app官网</description></item><item><title>App 持续集成</title><link>https://joelz.github.io/tech-blog/posts/20211026-app_ci/</link><pubDate>Tue, 26 Oct 2021 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20211026-app_ci/</guid><description>Android: build from command line 从命令行构建您的应用 | Android 开发者 | Android Developers gradle - Build Android Studio app via command line - Stack Overflow Android Studio: how to generate signed apk using Gradle? | Newbedev Set Android apk filename in Gradle · Taneli Korri android - You have not accepted the license agreements of the following SDK components - Stack Overflow iOS: build from command line iOS versioning | Twitch Blog how to generate the .</description></item><item><title>iOS上面的验证码自动填充功能</title><link>https://joelz.github.io/tech-blog/posts/20211025-ios_sms_code_autofill/</link><pubDate>Mon, 25 Oct 2021 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20211025-ios_sms_code_autofill/</guid><description>测试页面在这里：Demo
结论 只有iOS上才有验证码自动填充功能吗？对。 在iOS上，只有纯数字验证码才能自动填充，数字字母验证码没法自动填充？对。 在iOS上，非Safari浏览器上，自动填充会填写两次？H5 页面在 IOS 上短信验证码点击一次会自动填充两次 bug 解决 - 海滨擎蟹 修改自动填充后input的样式：Change Autocomplete Styles in WebKit Browsers | CSS-Tricks 注意字体样式要根据各个输入框去调整 验证码输入控件处理：不会触发paste事件，触发的事keyup和input事件 android手机上的自动填充？和QA的对话：
对于android系统，目前不会有这个东西。大部分android手机，都是会在屏幕顶部的区域出现短信的提示，短信提示中会有一个复制按钮，点这个复制按钮验证码被复制到剪贴板，然后到输入框中粘贴。我找用android机的同事问了一圈，目前荣耀、一加、小米都是这个行为。现在这个四个格子的验证码输入控件也是支持粘贴的，你可以再测试一下。
验证码输入组件在android机上有问题 最早是用一加6发现keycode一直为0，后面做了调整：
javascript - Keycode is always zero in Chrome for Android - Stack Overflow KeyboardEvent.code - Web APIs | MDN event.which | jQuery API Documentation 后来QA报bug，说在华为和荣耀上验证码输入控价都无法使用，因为keyCode完全不对：
javascript - keyCode on android is always 229 - Stack Overflow (9条消息) 中文输入法时获取e.keycode一直为229_brilliantSt的博客-CSDN博客 (9条消息) 解决安卓端拿不到软键盘真实keycode值，全为229。_所有热爱的东西都要不余遗力-CSDN博客 (9条消息) 移动端H5页面关于软键盘的一些踩坑记录_this_ITBoy的博客-CSDN博客 最后没办法，只能改为在android机器上就不显示验证码输入控件，用一个普通文本框来替代。
links 用起来像 UITextField 一样的自定义验证码输入框 - 掘金 记一次验证码输入框的实现 | kemchenj (3条消息) h5短信验证码复制/自动填充等问题_阿之阿佐-CSDN博客 One Time Security Code in iOS Safari | by Mark de Vries | Medium ios h5 验证码填充 - 掘金 (5条消息) 项目总结之ios手机中input框中粘贴短信验证码keyup事件无效_时清云的博客-CSDN博客</description></item><item><title>App CPU 架构是 x86 还是 x64？</title><link>https://joelz.github.io/tech-blog/posts/20210910-app_arch_x86_x64/</link><pubDate>Fri, 10 Sep 2021 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20210910-app_arch_x86_x64/</guid><description>Android app 上架应用商店时被问到 app 是 32 位还是 64 位的。所以有了这一片辨析。
iOS：64位 In iOS 11 and later, all apps use the 64-bit architecture. If your app targets an earlier version of iOS, you must update it to run on later versions.
Android：32位+64位 ABI是英文Application Binary Interface的缩写，及应用二进制接口。
Android 主要的ABIs: 32位：
X86 armeabi armeabi-v7a 64位：
X86–64, arm64-v8a, Android 7种CPU架构在当前市场的占有率 arm64-v8a: 目前主流版本 armeabi-v7a: 一些老旧的手机 x86 / x86_64: x86 架构的手机都会包含由 Intel 提供的称为 Houdini 的指令集动态转码工具，实现对 arm .so 的兼容，再考虑 x86 1% 以下的市场占有率，x86 相关的两个 .</description></item><item><title>微信小程序持续集成相关</title><link>https://joelz.github.io/tech-blog/posts/20210715-miniprogram_ci/</link><pubDate>Thu, 15 Jul 2021 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20210715-miniprogram_ci/</guid><description>预览和上传的区别 微信开发者工具有两个按钮：预览和上传。
miniprogram-ci 是从微信开发者工具中抽离的关于小程序/小游戏项目代码的编译模块，有 ci.preview和ci.upload两个方法。和上两个按钮对应。
预览时，只能在小程序助手的开发版列表中看到，在PC Web小程序后台的开发版列表看不到。 上传时，只能在PC Web小程序后台的开发版列表看到，在小程序助手的开发版列表中看不到。
只有在PC Web小程序后台才可进行「选为体验版本」及「提交审核」操作。
所以现在的做法是在preview.js中先执行一次ci.preview，再执行一次ci.upload。
links 用__wxConfig.envVersion区分小程序体验版，开发板，正式版 | 微信开放社区 小程序助手里面的版本查看的开发版不能自动更新啊 | 微信开放社区 使用 miniprogram-ci 上传的版本在小程序助手里看不见？ | 微信开放社区 微信开发者工具交流专区 | 微信开放社区 可否在小程序助手里提供发布版本的功能? | 微信开放社区 开发者工具上传后，小程序助手没有该版本显示？ | 微信开放社区 一次奇怪的bug 有一天发现线上的小程序有奇怪的样式问题，同样的代码在我们自己电脑上打包传上去却没有问题。最后发现是jenkins上的pipeline里面使用的miniprogram-ci使用的版本太旧了。se照着package.json来确定的版本号，但是在我们本地，我们用的yarn.lock中的版本。
微信小程序强制更新 从文档可以看出，判断小程序是否有新版本和下载小程序新版本代码都是由微信自行负责，我们的代码无法介入。我们的代码能够做的就是：「如果需要马上应用最新版本，可以使用 wx.getUpdateManager API 进行处理。」
updateManager.applyUpdate()会有一次系统提示框，所以我们自己的代码就不需要提示用户了。
links 微信小程序发布新版本时自动提示用户更新 - 逍遥云天 - 博客园 uni-app 小程序更新后强制用户升级 - 瞭月 (3)强制更新 | 微信开放社区 小程序更新机制 | 微信开放文档 UpdateManager | 微信开放文档 https://developers.weixin.qq.com/community/search?query=UpdateManager&amp;amp;block=1&amp;amp;blogcategory=0&amp;amp;sort=0&amp;amp;time=0&amp;amp;starttime=&amp;amp;endtime=&amp;amp;type%5Bpage%5D=1&amp;amp;type%5Bblock%5D=1&amp;amp;type%5Btype%5D=1&amp;amp;type%5Bquery%5D=UpdateManager&amp;amp;page=2 为什么小程序更新提示只有ios用户有，安卓用户看不到更新提示？ | 微信开放社区 这几天小程序的updateManager.onCheckForUpdate 安卓不能用了，苹果好使 | 微信开放社区 版本更新提醒，工具上好用，真机就没反应？ | 微信开放社区 updateManager.</description></item><item><title>Capacitor setup in Apple M1 Mac</title><link>https://joelz.github.io/tech-blog/posts/20210504-capacitor_setup_in_apple_m1/</link><pubDate>Tue, 04 May 2021 12:01:58 +0800</pubDate><guid>https://joelz.github.io/tech-blog/posts/20210504-capacitor_setup_in_apple_m1/</guid><description>运行环境 macOS Big Sur 11.2.2 Xcode 12.4 Android Studio 4.1.3 node 14.16.1 Capacitor 2.4.1 Vue 3.0
Web npm install -g @ionic/cli git clone https://github.com/ionic-team/tutorial-photo-gallery-vue.git cd photo-gallery-capacitor-vue npm install ionic serve iOS 修改appId git clone下来的代码里面的appId是io.ionic.demo.pg.vue，要换成自己的。VS Code打开代码文件夹，查找替换该appId为新的appId（比如com.dc1979.capacitor.demo.vue）
安装arm版CocoaPod 参考的是这个SO：https://stackoverflow.com/a/66556339
确认安装了arm版Homebrew：which brew返回的结果是 /opt/homebrew/bin/brew。不是的话就按照这篇文章去安装arm版Homebrew：在 M1 芯片 Mac 上使用 Homebrew 安装arm版ruby：brew install ruby 把环境变量加到PATH中：echo 'export PATH=&amp;quot;/opt/homebrew/opt/ruby/bin:/opt/homebrew/lib/ruby/gems/3.0.0/bin:$PATH&amp;quot;' &amp;gt;&amp;gt; ~/.zshrc Execute source ~/.zshrc or restart your shell 确定which ruby返回的是$(brew --prefix)/opt/ruby/bin/ruby Install CocoaPods with sudo gem install cocoapods Make sure you are using the correct pod binary by executing which pod (should be $(brew --prefix)/lib/ruby/gems/3.</description></item></channel></rss>