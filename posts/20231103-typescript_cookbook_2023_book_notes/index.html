<!doctype html><html><head><title>读书笔记：OReilly.TypeScript.Cookbook.2023.8.epub</title>
<meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content="类型体操练起来"><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><meta property="og:url" content="https://joelz.github.io/tech-blog/posts/20231103-typescript_cookbook_2023_book_notes/"><meta property="og:site_name" content="Notes by Joel"><meta property="og:title" content="读书笔记：OReilly.TypeScript.Cookbook.2023.8.epub"><meta property="og:description" content="类型体操练起来"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-03T12:01:58+08:00"><meta property="article:modified_time" content="2023-11-03T12:01:58+08:00"><meta property="article:tag" content="Book"><meta property="article:tag" content="Typescript"><meta name=twitter:card content="summary"><meta name=twitter:title content="读书笔记：OReilly.TypeScript.Cookbook.2023.8.epub"><meta name=twitter:description content="类型体操练起来"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","abcdefghzd")</script><script src=/tech-blog/js/toc.js></script><link type=text/css rel=stylesheet href=/tech-blog/vendor/css/bootstrap.min.css><link rel=stylesheet href=/tech-blog/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=/tech-blog/posts>Archive
</a><a class="a-block drawer-menu-item false" href=/tech-blog/categories>Categories
</a><a class="a-block drawer-menu-item false" href=/tech-blog/tags>Tags
</a><a class="a-block drawer-menu-item false" href=/tech-blog/index.xml>RSS Feed</a><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#48-using-thistype-to-define-this-in-objects class=nav-48-using-thistype-to-define-this-in-objects>4.8 Using ThisType to Define this in Objects</a></li><li><a href=#65-dealing-with-recursion-limits class=nav-65-dealing-with-recursion-limits>6.5 Dealing with Recursion Limits</a></li><li><a href=#72-typing-a-promisify-function class=nav-72-typing-a-promisify-function>7.2 Typing a promisify Function</a></li><li><a href=#83-remapping-types class=nav-83-remapping-types>8.3 Remapping Types</a></li><li><a href=#127-deciding-whether-to-use-function-overloads-or-conditional-types class=nav-127-deciding-whether-to-use-function-overloads-or-conditional-types>12.7 Deciding Whether to Use Function Overloads or Conditional Types</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu
</i></button>
<a id=navTitle class=navbar-brand href=https://joelz.github.io/tech-blog/>Notes by Joel
</a><button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://joelz.github.io/tech-blog/><div class=single-column-header-title>Notes by Joel</div><div class=single-column-header-subtitle>Bytes and Bits, Piece by Piece.</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper style=background-image:url(https://joelz.github.io/tech-blog/images/notebook.jpg)><div class=post-title>读书笔记：OReilly.TypeScript.Cookbook.2023.8.epub<div class=post-subtitle>类型体操练起来</div><div class=post-meta><time itemprop=datePublished>2023-11-03 12:01
</time><i class=material-icons>folder</i>
<a href=/categories/bool>bool</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/book>book</a>
&nbsp;
<a href=/tags/typescript>typescript</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><h2 id=48-using-thistype-to-define-this-in-objects>4.8 Using ThisType to Define this in Objects</h2><p><strong>Problem:</strong> Your app requires complex configuration objects with methods, where this has a different context depending on usage.</p><p><strong>Solution:</strong> Use the built-in generic <code>ThisType&lt;T></code> to define the correct this.</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">38
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// An object of functions ...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>type</span> <span style=color:#c1abea>FnObj</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>Record</span>&lt;<span style=color:#e06c75>string</span>, () =&gt; <span style=color:#ef8383>any</span><span style=color:#c7bf54>&gt;</span>;
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// ... to an object of return types
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>type</span> <span style=color:#c1abea>MapFnToProp</span>&lt;<span style=color:#e06c75>FunctionObj</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>FnObj</span>&gt; <span style=color:#c7bf54>=</span> {
</span></span><span style=display:flex><span>  [<span style=color:#c1abea>K</span> <span style=color:#c678dd>in</span> <span style=color:#c678dd>keyof</span> <span style=color:#c1abea>FunctionObj</span>]<span style=color:#c7bf54>:</span> <span style=color:#c1abea>ReturnType</span>&lt;<span style=color:#e06c75>FunctionObj</span>[<span style=color:#b3d23c>K</span>]&gt;;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>Options</span>&lt;<span style=color:#e06c75>Data</span>, <span style=color:#b3d23c>Computed</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>FnObj</span>, <span style=color:#b3d23c>Methods</span>&gt; <span style=color:#c7bf54>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#c1abea>data</span>(<span style=color:#c678dd>this</span><span style=color:#c7bf54>:</span> {})<span style=color:#c7bf54>?:</span> <span style=color:#c1abea>Data</span>;
</span></span><span style=display:flex><span>  <span style=color:#c1abea>computed?</span>: <span style=color:#ef8383>Computed</span> <span style=color:#c7bf54>&amp;</span> <span style=color:#c1abea>ThisType</span>&lt;<span style=color:#e06c75>Data</span>&gt;;
</span></span><span style=display:flex><span>  <span style=color:#c1abea>methods?</span>: <span style=color:#ef8383>Methods</span> <span style=color:#c7bf54>&amp;</span> <span style=color:#c1abea>ThisType</span>&lt;<span style=color:#e06c75>Data</span> &amp; <span style=color:#b3d23c>MapFnToProp</span>&lt;<span style=color:#b3d23c>Computed</span>&gt; <span style=color:#c7bf54>&amp;</span> <span style=color:#c1abea>Methods</span><span style=color:#c7bf54>&gt;</span>;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>declare</span> <span style=color:#c678dd>function</span> <span style=color:#c1abea>create</span>&lt;<span style=color:#e06c75>Data</span>, <span style=color:#b3d23c>Computed</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>FnObj</span>, <span style=color:#b3d23c>Methods</span>&gt;(
</span></span><span style=display:flex><span>  <span style=color:#c1abea>options</span>: <span style=color:#ef8383>Options</span>&lt;<span style=color:#e06c75>Data</span>, <span style=color:#b3d23c>Computed</span>, <span style=color:#b3d23c>Methods</span>&gt;
</span></span><span style=display:flex><span>)<span style=color:#c7bf54>:</span> <span style=color:#ef8383>any</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// use the types
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>const</span> <span style=color:#c1abea>instance</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>create</span>({
</span></span><span style=display:flex><span>  <span style=color:#c1abea>data() {</span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> {
</span></span><span style=display:flex><span>      <span style=color:#c1abea>firstName</span><span style=color:#c7bf54>:</span> <span style=color:#63c381>&#34;Stefan&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#c1abea>lastName</span><span style=color:#c7bf54>:</span> <span style=color:#63c381>&#34;Baumgartner&#34;</span>,
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#c1abea>computed</span><span style=color:#c7bf54>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#c1abea>fullName() {</span>
</span></span><span style=display:flex><span>      <span style=color:#8a93a5;font-style:italic>// has access to the return object of data
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>      <span style=color:#c678dd>return</span> <span style=color:#c678dd>this</span>.<span style=color:#c1abea>firstName</span> <span style=color:#c7bf54>+</span> <span style=color:#63c381>&#34; &#34;</span> <span style=color:#c7bf54>+</span> <span style=color:#c678dd>this</span>.<span style=color:#c1abea>lastName</span>;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#c1abea>methods</span><span style=color:#c7bf54>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#c1abea>hi() {</span>
</span></span><span style=display:flex><span>      <span style=color:#8a93a5;font-style:italic>// use computed properties just like normal properties
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>      <span style=color:#c1abea>alert</span>(<span style=color:#c678dd>this</span>.<span style=color:#c1abea>fullName</span>.<span style=color:#c1abea>toLowerCase</span>());
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h2 id=65-dealing-with-recursion-limits>6.5 Dealing with Recursion Limits</h2><p>We want to use TypeScript’s feature to recursively call conditional types to create a valid string identifier out of any string, by removing whitespace and invalid
characters.</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>RemoveWhiteSpace</span>&lt;<span style=color:#e06c75>T</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>string</span>&gt; <span style=color:#c7bf54>=</span> <span style=color:#c1abea>T</span> <span style=color:#c678dd>extends</span> <span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>A</span><span style=color:#98c379>}</span><span style=color:#98c379> </span><span style=color:#98c379>${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>B</span><span style=color:#98c379>}</span><span style=color:#98c379>`</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>RemoveWhiteSpace</span><span style=color:#c7bf54>&lt;</span><span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c1abea>Uncapitalize</span>&lt;<span style=color:#e06c75>A</span>&gt;<span style=color:#98c379>}${</span><span style=color:#c1abea>Capitalize</span>&lt;<span style=color:#e06c75>B</span>&gt;<span style=color:#98c379>}</span><span style=color:#98c379>`</span><span style=color:#c7bf54>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>:</span> <span style=color:#c1abea>T</span>;  
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>Identifier</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>RemoveWhiteSpace</span><span style=color:#c7bf54>&lt;</span><span style=color:#63c381>&#34;Hello World!&#34;</span><span style=color:#c7bf54>&gt;</span>; <span style=color:#8a93a5;font-style:italic>// &#34;helloWorld!”
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>StringSplit</span>&lt;<span style=color:#e06c75>T</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>string</span>&gt; <span style=color:#c7bf54>=</span> <span style=color:#c1abea>T</span> <span style=color:#c678dd>extends</span> <span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>Char</span><span style=color:#98c379>}${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>Rest</span><span style=color:#98c379>}</span><span style=color:#98c379>`</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>Capitalize</span>&lt;<span style=color:#e06c75>Char</span>&gt; <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Uncapitalize</span>&lt;<span style=color:#e06c75>Char</span>&gt; <span style=color:#c7bf54>|</span> <span style=color:#c1abea>StringSplit</span>&lt;<span style=color:#e06c75>Rest</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>:</span> <span style=color:#ef8383>never</span>;
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>Chars</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>StringSplit</span><span style=color:#c7bf54>&lt;</span><span style=color:#63c381>&#34;abcdefghijklmnopqrstuvwxyz&#34;</span><span style=color:#c7bf54>&gt;</span>;
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>//  &#34;a&#34; | &#34;A&#34; | &#34;b&#34; | &#34;B&#34; | &#34;c&#34; | &#34;C&#34; | &#34;d&#34; | &#34;D&#34; | &#34;e&#34; | &#34;E&#34; |
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>//  &#34;f&#34; | &#34;F&#34; | &#34;g&#34; | &#34;G&#34; | &#34;h&#34; | &#34;H&#34; | &#34;i&#34; | ...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>CreateIdentifier</span>&lt;<span style=color:#e06c75>T</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>string</span>&gt; <span style=color:#c7bf54>=</span>
</span></span><span style=display:flex><span>  <span style=color:#c1abea>RemoveWhiteSpace</span>&lt;<span style=color:#e06c75>T</span>&gt; <span style=color:#c678dd>extends</span> <span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>A</span> <span style=color:#c678dd>extends</span> <span style=color:#c1abea>Chars</span><span style=color:#98c379>}${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>Rest</span><span style=color:#98c379>}</span><span style=color:#98c379>`</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c1abea>A</span><span style=color:#98c379>}${</span><span style=color:#c1abea>CreateIdentifier</span>&lt;<span style=color:#e06c75>Rest</span>&gt;<span style=color:#98c379>}</span><span style=color:#98c379>`</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>//  ^ Type instantiation is excessively deep and possibly infinite.(2589)_.
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>  <span style=color:#c7bf54>:</span> <span style=color:#c1abea>RemoveWhiteSpace</span>&lt;<span style=color:#e06c75>T</span>&gt; <span style=color:#c678dd>extends</span> <span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>A</span><span style=color:#98c379>}${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>Rest</span><span style=color:#98c379>}</span><span style=color:#98c379>`</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>CreateIdentifier</span>&lt;<span style=color:#e06c75>Rest</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>:</span> <span style=color:#c1abea>T</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>CreateIdentifier</span>&lt;<span style=color:#e06c75>T</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>string</span>, <span style=color:#b3d23c>Acc</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>string </span><span style=color:#c7bf54>=</span> <span style=color:#98c379>&#34;&#34;</span>&gt; <span style=color:#c7bf54>=</span>
</span></span><span style=display:flex><span>  <span style=color:#c1abea>RemoveWhiteSpace</span>&lt;<span style=color:#e06c75>T</span>&gt; <span style=color:#c678dd>extends</span> <span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>A</span> <span style=color:#c678dd>extends</span> <span style=color:#c1abea>Chars</span><span style=color:#98c379>}${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>Rest</span><span style=color:#98c379>}</span><span style=color:#98c379>`</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>CreateIdentifier</span>&lt;<span style=color:#e06c75>Rest</span>, `${<span style=color:#b3d23c>Acc</span>}${<span style=color:#b3d23c>A</span>}`&gt;
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>:</span> <span style=color:#c1abea>RemoveWhiteSpace</span>&lt;<span style=color:#e06c75>T</span>&gt; <span style=color:#c678dd>extends</span> <span style=color:#98c379>`</span><span style=color:#98c379>${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>A</span><span style=color:#98c379>}${</span><span style=color:#c678dd>infer</span> <span style=color:#c1abea>Rest</span><span style=color:#98c379>}</span><span style=color:#98c379>`</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>CreateIdentifier</span>&lt;<span style=color:#e06c75>Rest</span>, <span style=color:#b3d23c>Acc</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>:</span> <span style=color:#c1abea>Acc</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>Identifier</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>CreateIdentifier</span><span style=color:#c7bf54>&lt;</span><span style=color:#63c381>&#34;Hello Wor!ld!&#34;</span><span style=color:#c7bf54>&gt;</span>; <span style=color:#8a93a5;font-style:italic>// &#34;helloWorld&#34;
</span></span></span></code></pre></td></tr></table></div></div><h2 id=72-typing-a-promisify-function>7.2 Typing a promisify Function</h2><p><strong>Problem:</strong> You want to convert callback-style functions to Promises and have them perfectly typed.</p><p><strong>Solution:</strong> Function arguments are tuple types. Make them generic using variadic tuple types.</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>promisify</span>&lt;<span style=color:#e06c75>Args</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>unknown</span>[], <span style=color:#b3d23c>Res</span>&gt;(
</span></span><span style=display:flex><span>  <span style=color:#c1abea>fn</span><span style=color:#c7bf54>:</span> (...<span style=color:#c1abea>args</span><span style=color:#c7bf54>:</span> [...<span style=color:#c1abea>Args</span>, (<span style=color:#c1abea>result</span>: <span style=color:#ef8383>Res</span>) <span style=color:#c7bf54>=&gt;</span> <span style=color:#c678dd>void</span>]) <span style=color:#c7bf54>=&gt;</span> <span style=color:#c678dd>void</span>
</span></span><span style=display:flex><span>)<span style=color:#c7bf54>:</span> (...<span style=color:#c1abea>args</span>: <span style=color:#ef8383>Args</span>) <span style=color:#c7bf54>=&gt;</span> <span style=color:#c1abea>Promise</span>&lt;<span style=color:#e06c75>Res</span>&gt; {
</span></span><span style=display:flex><span>  <span style=color:#c678dd>return</span> <span style=color:#c678dd>function</span> (...<span style=color:#c1abea>args</span>: <span style=color:#ef8383>Args</span>) { 
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#c678dd>new</span> <span style=color:#c1abea>Promise</span>((<span style=color:#c1abea>resolve</span>) <span style=color:#c7bf54>=&gt;</span> { 
</span></span><span style=display:flex><span>      <span style=color:#c678dd>function</span> <span style=color:#c1abea>callback</span>(<span style=color:#c1abea>res</span>: <span style=color:#ef8383>Res</span>) { 
</span></span><span style=display:flex><span>        <span style=color:#c1abea>resolve</span>(<span style=color:#c1abea>res</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#c1abea>fn</span>.<span style=color:#c1abea>call</span>(<span style=color:#b756ff;font-weight:700>null</span>, ...[...<span style=color:#c1abea>args</span>, <span style=color:#c1abea>callback</span>]); 
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=83-remapping-types>8.3 Remapping Types</h2><p><strong>Problem:</strong> Constructing types gives you flexible, self-maintaining types, but the editor hints leave a lot to be desired.</p><p><strong>Solution:</strong> Use the Remap and DeepRemap helper types to improve editor hints.</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>Remap</span>&lt;<span style=color:#e06c75>T</span>&gt; <span style=color:#c7bf54>=</span> {
</span></span><span style=display:flex><span>  [<span style=color:#c1abea>K</span> <span style=color:#c678dd>in</span> <span style=color:#c678dd>keyof</span> <span style=color:#c1abea>T</span>]<span style=color:#c7bf54>:</span> <span style=color:#c1abea>T</span>[<span style=color:#c1abea>K</span>];
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>DeepRemap</span>&lt;<span style=color:#e06c75>T</span>&gt; <span style=color:#c7bf54>=</span> <span style=color:#c1abea>T</span> <span style=color:#c678dd>extends</span> <span style=color:#ef8383>object</span>
</span></span><span style=display:flex><span><span style=color:#c7bf54>?</span> {
</span></span><span style=display:flex><span>    [<span style=color:#c1abea>K</span> <span style=color:#c678dd>in</span> <span style=color:#c678dd>keyof</span> <span style=color:#c1abea>T</span>]<span style=color:#c7bf54>:</span> <span style=color:#c1abea>DeepRemap</span>&lt;<span style=color:#e06c75>T</span>[<span style=color:#b3d23c>K</span>]&gt;;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#c7bf54>:</span> <span style=color:#c1abea>T</span>;
</span></span></code></pre></td></tr></table></div></div><h2 id=127-deciding-whether-to-use-function-overloads-or-conditional-types>12.7 Deciding Whether to Use Function Overloads or Conditional Types</h2><p>Function overloads provide better readability and an easier way to define expectations from your type than conditionals. Use them when the situation requires.</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// Function overloads
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>(<span style=color:#c1abea>customer</span>: <span style=color:#ef8383>Customer</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Order</span>[]
</span></span><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>(<span style=color:#c1abea>product</span>: <span style=color:#ef8383>Product</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Order</span>[]
</span></span><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>(<span style=color:#c1abea>orderId</span>: <span style=color:#ef8383>number</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Order</span>
</span></span><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>(<span style=color:#c1abea>param</span>: <span style=color:#ef8383>Customer</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Product</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Order</span>[]
</span></span><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>(<span style=color:#c1abea>param</span>: <span style=color:#ef8383>Customer</span> <span style=color:#c7bf54>|</span> <span style=color:#ef8383>number</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Order</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Order</span>[]
</span></span><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>(<span style=color:#c1abea>param</span>: <span style=color:#ef8383>number</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Product</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Order</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Order</span>[]
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// the implementation
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>(<span style=color:#c1abea>param</span>: <span style=color:#ef8383>any</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Order</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Order</span>[] {
</span></span><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic>//...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// Here, conditional types can reduce your function signature tremendously:
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>type</span> <span style=color:#c1abea>FetchParams</span> <span style=color:#c7bf54>=</span> <span style=color:#ef8383>number</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Customer</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Product</span>;
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#c1abea>FetchReturn</span>&lt;<span style=color:#e06c75>T</span>&gt; <span style=color:#c7bf54>=</span> <span style=color:#c1abea>T</span> <span style=color:#c678dd>extends</span> <span style=color:#c1abea>Customer</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>Order</span>[]
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>:</span> <span style=color:#c1abea>T</span> <span style=color:#c678dd>extends</span> <span style=color:#c1abea>Product</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>Order</span>[]
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>:</span> <span style=color:#c1abea>T</span> <span style=color:#c678dd>extends</span> <span style=color:#ef8383>number</span>
</span></span><span style=display:flex><span>  <span style=color:#c7bf54>?</span> <span style=color:#c1abea>Order</span>
</span></span><span style=display:flex><span>  : <span style=color:#ef8383>never</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>fetchOrder</span>&lt;<span style=color:#e06c75>T</span> <span style=color:#b3d23c>extends</span> <span style=color:#b3d23c>FetchParams</span>&gt;(<span style=color:#c1abea>params</span>: <span style=color:#ef8383>T</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>FetchReturn</span>&lt;<span style=color:#e06c75>T</span>&gt; {
</span></span><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic>//...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>}
</span></span></code></pre></td></tr></table></div></div><p>One scenario where function overloads remain handy is if you have different argument lists for your function variants. This means not only the arguments (parameters) themselves can have some variety (this is where conditionals and variadic tuples are fantastic) but also the number and position of arguments.</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>search</span>(<span style=color:#c1abea>query</span>: <span style=color:#ef8383>string</span>)<span style=color:#c7bf54>:</span> <span style=color:#c1abea>Promise</span>&lt;<span style=color:#e06c75>unknown</span>[]&gt;;
</span></span><span style=display:flex><span><span style=color:#c678dd>function</span> <span style=color:#c1abea>search</span>(<span style=color:#c1abea>query</span>: <span style=color:#ef8383>string</span>, <span style=color:#c1abea>callback</span><span style=color:#c7bf54>:</span> (<span style=color:#c1abea>result</span>: <span style=color:#ef8383>unknown</span>[]) <span style=color:#c7bf54>=&gt;</span> <span style=color:#c678dd>void</span>)<span style=color:#c7bf54>:</span> <span style=color:#c678dd>void</span>;
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// This is the implementation, it only concerns you
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>function</span> <span style=color:#c1abea>search</span>(
</span></span><span style=display:flex><span>  <span style=color:#c1abea>query</span>: <span style=color:#ef8383>string</span>,
</span></span><span style=display:flex><span>  <span style=color:#c1abea>callback</span><span style=color:#c7bf54>?:</span> (<span style=color:#c1abea>result</span>: <span style=color:#ef8383>unknown</span>[]) <span style=color:#c7bf54>=&gt;</span> <span style=color:#c678dd>void</span>
</span></span><span style=display:flex><span>)<span style=color:#c7bf54>:</span> <span style=color:#c678dd>void</span> <span style=color:#c7bf54>|</span> <span style=color:#c1abea>Promise</span>&lt;<span style=color:#e06c75>unknown</span>&gt; {
</span></span><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic>// Implement
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>}
</span></span></code></pre></td></tr></table></div></div><p>Another situation where function overloads can make things easier is when you need exact arguments and their mapping.”</p><hr width=100% id=EOF><p style=color:#777>Last modified on 2023-11-03</p></div></div><nav class=post-pagination><a class=newer-posts>Next<br>No newer posts.
</a><a class=older-posts href=/tech-blog/posts/20230815-android_app_links/>Previous<br>短信链接拉起 app 方案</a></nav><div class=post-comment-wrapper><p style=opacity:.6 align=center><small>Comments Disabled.</small></p></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://joelz.github.io/tech-blog/><div class=nav-title>Notes by Joel</div><div class=nav-subtitle>Bytes and Bits, Piece by Piece.</div></a><div class=nav-link-list><a class="a-block nav-link-item active" href=/tech-blog/posts>Archive
</a><a class="a-block nav-link-item false" href=/tech-blog/categories>Categories
</a><a class="a-block nav-link-item false" href=/tech-blog/tags>Tags
</a><a class="a-block nav-link-item false" href=/tech-blog/index.xml>RSS Feed</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copy, right? 🤔</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#48-using-thistype-to-define-this-in-objects class=nav-48-using-thistype-to-define-this-in-objects>4.8 Using ThisType to Define this in Objects</a></li><li><a href=#65-dealing-with-recursion-limits class=nav-65-dealing-with-recursion-limits>6.5 Dealing with Recursion Limits</a></li><li><a href=#72-typing-a-promisify-function class=nav-72-typing-a-promisify-function>7.2 Typing a promisify Function</a></li><li><a href=#83-remapping-types class=nav-83-remapping-types>8.3 Remapping Types</a></li><li><a href=#127-deciding-whether-to-use-function-overloads-or-conditional-types class=nav-127-deciding-whether-to-use-function-overloads-or-conditional-types>12.7 Deciding Whether to Use Function Overloads or Conditional Types</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up
</i></a><a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copy, right? 🤔</div></div><script src=/tech-blog/js/journal.js></script></body></html>