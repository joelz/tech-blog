<!doctype html><html><head><title>短信链接拉起 app 方案</title>
<meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content="iOS 上采用 Universal Links，Android 上采用 URL Scheme(非https/http)"><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><meta property="og:url" content="https://joelz.github.io/tech-blog/posts/20230815-android_app_links/"><meta property="og:site_name" content="Notes by Joel"><meta property="og:title" content="短信链接拉起 app 方案"><meta property="og:description" content="iOS 上采用 Universal Links，Android 上采用 URL Scheme(非https/http)"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-15T12:01:58+08:00"><meta property="article:modified_time" content="2023-08-15T12:01:58+08:00"><meta property="article:tag" content="App"><meta name=twitter:card content="summary"><meta name=twitter:title content="短信链接拉起 app 方案"><meta name=twitter:description content="iOS 上采用 Universal Links，Android 上采用 URL Scheme(非https/http)"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","abcdefghzd")</script><script src=/tech-blog/js/toc.js></script><link type=text/css rel=stylesheet href=/tech-blog/vendor/css/bootstrap.min.css><link rel=stylesheet href=/tech-blog/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=/tech-blog/posts>Archive
</a><a class="a-block drawer-menu-item false" href=/tech-blog/categories>Categories
</a><a class="a-block drawer-menu-item false" href=/tech-blog/tags>Tags
</a><a class="a-block drawer-menu-item false" href=/tech-blog/index.xml>RSS Feed</a><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#%e9%9c%80%e6%b1%82 class=nav-需求>需求</a></li><li><a href=#%e7%bb%93%e8%ae%ba class=nav-结论>结论</a></li><li><a href=#ios-%e6%b5%8b%e8%af%95%e7%bb%93%e6%9e%9c class=nav-ios-测试结果>iOS 测试结果</a></li><li><a href=#android-%e6%b5%8b%e8%af%95%e7%bb%93%e6%9e%9c class=nav-android-测试结果>Android 测试结果</a></li><li><a href=#uniapp-%e4%bb%a3%e7%a0%81 class=nav-uniapp-代码>uniapp 代码</a></li><li><a href=#links class=nav-links>links</a></li><ul><li><a href=#%e5%bf%85%e8%af%bb class=nav-必读>必读</a></li><li><a href=#app-links class=nav-app-links>app links</a></li><li><a href=#url-scheme class=nav-url-scheme>url scheme</a></li><li><a href=#test class=nav-test>test</a></li></ul><li><a href=#ios-%e4%b8%8a%e7%9f%ad%e4%bf%a1%e9%93%be%e6%8e%a5%e6%8b%89%e8%b5%b7%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f class=nav-ios-上短信链接拉起微信小程序>iOS 上短信链接拉起微信小程序</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu
</i></button>
<a id=navTitle class=navbar-brand href=https://joelz.github.io/tech-blog/>Notes by Joel
</a><button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://joelz.github.io/tech-blog/><div class=single-column-header-title>Notes by Joel</div><div class=single-column-header-subtitle>Bytes and Bits, Piece by Piece.</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper style=background-image:url(https://joelz.github.io/tech-blog/images/notebook.jpg)><div class=post-title>短信链接拉起 app 方案<div class=post-subtitle>iOS 上采用 Universal Links，Android 上采用 URL Scheme(非https/http)</div><div class=post-meta><time itemprop=datePublished>2023-08-15 12:01
</time><i class=material-icons>folder</i>
<a href=/categories/app>app</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/app>app</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><h2 id=需求>需求</h2><p>短信链接拉起app，去到app的某个特定页面。</p><h2 id=结论>结论</h2><p>iOS 上采用 Universal Links，Android 上采用 URL Scheme(非https/http)。落地页统一使用 Universal Links 指向的 app 下载页。如果考虑到用户可能没有安装 app，那 <a href=https://www.kerryplus.com/ulink/>https://www.kerryplus.com/ulink/</a> 需要返回页面（一般就是一个app下载页），这个页面上再执行 android 端的 url scheme 拉起app，类似这样的代码：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>   * 检查是否从短信中需拉起app的链接进入，如果是，且在 Anroid 上，则尝试拉起 app
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>  */</span>
</span></span><span style=display:flex><span>  <span style=color:#c678dd>function</span> <span style=color:#c1abea>checkAppDeepLink</span>() {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>const</span> <span style=color:#c1abea>platform</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>getMobileOperatingSystem</span>();
</span></span><span style=display:flex><span>    <span style=color:#c678dd>const</span> <span style=color:#c1abea>href</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>location</span>.<span style=color:#c1abea>href</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>const</span> <span style=color:#c1abea>index</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>href</span>.<span style=color:#c1abea>indexOf</span>(<span style=color:#98c379>&#39;/ulink/&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span> (<span style=color:#c1abea>index</span> <span style=color:#c7bf54>&gt;</span> <span style=color:#c7bf54>-</span><span style=color:#d19a66>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#c678dd>const</span> <span style=color:#c1abea>param</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>href</span>.<span style=color:#c1abea>substring</span>(<span style=color:#c1abea>index</span> <span style=color:#c7bf54>+</span> <span style=color:#d19a66>7</span>);<span style=color:#8a93a5;font-style:italic>// 7 就是 &#39;/ulink/&#39;.length
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span>      <span style=color:#8a93a5;font-style:italic>// iOS 上面进入页面时 Universal Links 就已经打开 app了
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>      <span style=color:#8a93a5;font-style:italic>// 所以这里只用处理 Android
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>      <span style=color:#c678dd>if</span> (<span style=color:#c1abea>platform</span> <span style=color:#c7bf54>==</span> <span style=color:#63c381>&#34;Android&#34;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#c1abea>location</span>.<span style=color:#c1abea>href</span> <span style=color:#c7bf54>=</span> <span style=color:#63c381>&#34;kerryplusenterprise://ulink/&#34;</span> <span style=color:#c7bf54>+</span> <span style=color:#c1abea>param</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span></code></pre></td></tr></table></div></div><h2 id=ios-测试结果>iOS 测试结果</h2><p>方案：Universal Links</p><table><thead><tr><th>默认浏览器</th><th>短信中用直链</th><th>短信中用短链接</th></tr></thead><tbody><tr><td>Safari</td><td>直接拉起 app，参数正确</td><td>先跳转到 Safari，然后再拉起 app，参数正确</td></tr><tr><td>Chrome</td><td>直接拉起 app，参数正确</td><td>先去到 Chrome，然后 404 了</td></tr></tbody></table><p>直链测试短信：Hello，这是跳转到 ios app 的链接：https://www.kerryplus.com/ulink/?a=1，点击可以打开C端App。</p><p>短链测试短信：Hello，这是跳转到 ios app 的短链接：sh7x.cn/3000CNF，点击可以打开C端App。</p><p>方案 Url Scheme：</p><p>Safari 和 Chrome 都可以，拉起前会有询问（iOS上短信链接拉起小程序用的就是 universal links + url scheme 拉起微信）。但是如果用户没有装 app，会有一个「打不开网页，因为网址无效」的弹窗。</p><ul><li><a href=https://community.jiguang.cn/article/464296>iOS 深度跳转（scheme、universal link）-极光社区</a></li><li><a href=https://community.jiguang.cn/article/464337>深度跳转-scheme-极光社区</a></li><li><a href=https://zhuanlan.zhihu.com/p/444908355>趣谈 iOS Universal Link - 知乎</a></li></ul><p>** Chrome+短链接 404 的原因是因为目标链接本身就是一个不存的地址，需要 nginx 做一下转发，返回app下载页 **</p><h2 id=android-测试结果>Android 测试结果</h2><p>方案：URL Scheme 和 App Links</p><p><strong>注意：URL Scheme 不能有大写字母！！</strong></p><p><strong>注意：intent-filter 要加到 android.intent.category.LAUNCHER 那个 activity 里面！！</strong></p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>&lt;!-- 方案1: URLScheme - https/http --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#8a93a5;font-style:italic>&lt;!-- &lt;intent-filter&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;category android:name=&#34;android.intent.category.DEFAULT&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;category android:name=&#34;android.intent.category.BROWSABLE&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;action android:name=&#34;android.intent.action.VIEW&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;data android:scheme=&#34;http&#34; android:host=&#34;app-links.dc1979.com&#34; android:pathPattern=&#34;.*&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;data android:scheme=&#34;https&#34; android:host=&#34;app-links.dc1979.com&#34; android:pathPattern=&#34;.*&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>            &lt;/intent-filter&gt; --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#8a93a5;font-style:italic>&lt;!-- 方案2: URLScheme - 非https/http --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>&lt;intent-filter&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#e06c75>&lt;category</span> <span style=color:#b3d23c>android:name=</span><span style=color:#98c379>&#34;android.intent.category.DEFAULT&#34;</span> <span style=color:#e06c75>/&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#e06c75>&lt;category</span> <span style=color:#b3d23c>android:name=</span><span style=color:#98c379>&#34;android.intent.category.BROWSABLE&#34;</span> <span style=color:#e06c75>/&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#e06c75>&lt;action</span> <span style=color:#b3d23c>android:name=</span><span style=color:#98c379>&#34;android.intent.action.VIEW&#34;</span> <span style=color:#e06c75>/&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#e06c75>&lt;data</span> <span style=color:#b3d23c>android:scheme=</span><span style=color:#98c379>&#34;h56131bcc&#34;</span> <span style=color:#e06c75>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>&lt;/intent-filter&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#8a93a5;font-style:italic>&lt;!-- 方案3: App Links --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#8a93a5;font-style:italic>&lt;!-- &lt;intent-filter android:autoVerify=&#34;true&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;category android:name=&#34;android.intent.category.DEFAULT&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;category android:name=&#34;android.intent.category.BROWSABLE&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;action android:name=&#34;android.intent.action.VIEW&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>              &lt;data android:scheme=&#34;https&#34; android:host=&#34;app-links.dc1979.com&#34; android:pathPrefix=&#34;/ulink&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>            &lt;/intent-filter&gt; --&gt;</span>
</span></span></code></pre></td></tr></table></div></div><table><thead><tr><th></th><th>测试1</th><th>测试 2</th><th>测试 3</th><th>测试 4</th><th>测试 5</th></tr></thead><tbody><tr><td>方案</td><td>URLScheme(https/http) + 直链</td><td>URLScheme(https/http) + 短链</td><td>URLScheme(非https/http) + 短链</td><td>App Links + 直链</td><td>App Links + 短链</td></tr><tr><td>使用的 apk</td><td>KerryPlus-3521-20230822.1434.apk</td><td>同测试1</td><td>KerryPlus-DEV-3531-20230822.1439.apk</td><td>KerryPlus-DEV-3541-20230822.1442.apk</td><td>同测试4</td></tr><tr><td>短信内容</td><td>Hello，这是跳转到 android app 的链接：https://app-links.dc1979.com/ulink/?a=1，点击可以打开C端App。</td><td>Hello，这是跳转到 android app 的短链接：sh7x.cn/3000Fyl，点击可以打开C端App。</td><td>Hello，这是跳转到 android app 的短链接：sh7x.cn/3000L48，点击可以打开C端App。</td><td>同测试1的短信内容</td><td>同测试2的短信内容</td></tr><tr><td>OPPO RENO7, android 13, 手机默浏览器</td><td>浏览器打开链接，app未拉起</td><td>浏览器打开链接，app未拉起</td><td>浏览器打开链接，三秒后弹窗，用户点击打开后app成功拉起，参数正确✅</td><td>浏览器打开链接，app未拉起</td><td>浏览器打开链接，app未拉起</td></tr><tr><td>VIVO S15 Android 13 手机默认浏览器</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td><td>浏览器打开链接，需要手动点击 立即跳转，成功跳转至APP，参数正确☑️</td><td>浏览器打开链接，app未拉起</td><td>浏览器打开链接，app未拉起</td></tr><tr><td>HUAWEI HarmonyOS 3.0.0 手机默认浏览器</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td><td>浏览器打开链接，需要手动点击 立即跳转，弹出“打开”，点击“打开”，成功跳转至APP，参数正确☑️</td><td>浏览器打开链接，手动点击 立即跳转，未弹出弹窗，app未拉起</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td></tr><tr><td>XIAOMI 11 MIUI 13.0.9 Android12 手机默认浏览器</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td><td>浏览器打开链接，三秒后弹窗，用户点击打开后app成功拉起，参数正确✅</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td><td>浏览器打开链接,未弹出弹窗，app未拉起</td></tr><tr><td>ONEPLUS 6, android 10, 手机默认浏览器</td><td>短信界面弹窗，用户选择app打开后，app成功拉起，但是参数不对</td><td>浏览器打开链接，app未拉起</td><td>浏览器打开链接，三秒后弹窗，用户点击打开后app成功拉起，参数正确✅</td><td>短信界面弹窗，用户选择app打开后，app成功拉起，但是参数不对</td><td>浏览器打开链接，app未拉起</td></tr><tr><td>ONEPLUS 6, android 10, Chrome</td><td>短信界面弹窗，用户选择app打开后，app成功拉起，但是参数不对</td><td>短信界面弹窗，用户选择app打开后，app成功拉起，但是参数不对</td><td>浏览器打开链接，三秒后弹窗，用户点击打开后app成功拉起，参数正确✅</td><td>短信界面弹窗，用户选择app打开后，app成功拉起，但是参数不对</td><td>短信界面弹窗，用户选择app打开后，app成功拉起，但是参数不对</td></tr></tbody></table><h2 id=uniapp-代码>uniapp 代码</h2><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// onShow in App.vue 
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#c678dd>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#c678dd>const</span> <span style=color:#c1abea>obj</span> <span style=color:#c7bf54>=</span> { <span style=color:#c1abea>args</span><span style=color:#c7bf54>:</span> <span style=color:#c1abea>plus</span>.<span style=color:#c1abea>runtime</span>.<span style=color:#c1abea>arguments</span>, <span style=color:#98c379>&#39;来源&#39;</span><span style=color:#c7bf54>:</span> <span style=color:#c1abea>plus</span>.<span style=color:#c1abea>runtime</span>.<span style=color:#c1abea>launcher</span> };
</span></span><span style=display:flex><span>      <span style=color:#8a93a5;font-style:italic>// ios: {&#34;args&#34;:&#34;https://www.kerryplus.com/ulink/testpage&#34;,&#34;来源&#34;:&#34;uniLink&#34;}
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>      <span style=color:#8a93a5;font-style:italic>// android:
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>      <span style=color:#8a93a5;font-style:italic>// eslint-disable-next-line no-console
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>      <span style=color:#c1abea>console</span>.<span style=color:#c1abea>log</span>(<span style=color:#98c379>&#39;===&#39;</span>, <span style=color:#c1abea>JSON</span>.<span style=color:#c1abea>stringify</span>(<span style=color:#c1abea>obj</span>));
</span></span><span style=display:flex><span>      <span style=color:#c1abea>setTimeout</span>(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#c1abea>uni</span>.<span style=color:#c1abea>showToast</span>({
</span></span><span style=display:flex><span>          <span style=color:#c1abea>title</span><span style=color:#c7bf54>:</span> <span style=color:#c1abea>JSON</span>.<span style=color:#c1abea>stringify</span>(<span style=color:#c1abea>obj</span>),
</span></span><span style=display:flex><span>          <span style=color:#c1abea>icon</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;none&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#c1abea>duration</span><span style=color:#c7bf54>:</span> <span style=color:#d19a66>1000</span> <span style=color:#c7bf54>*</span> <span style=color:#d19a66>6</span>
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }, <span style=color:#d19a66>500</span>);
</span></span><span style=display:flex><span>    } <span style=color:#c678dd>catch</span> { }
</span></span></code></pre></td></tr></table></div></div><h2 id=links>links</h2><h3 id=必读>必读</h3><ul><li><a href=https://lvan-zhang.blog.csdn.net/article/details/121210350>【精选】可能是最全的h5唤起App方案_h5唤醒app-CSDN博客</a></li><li><a href="https://github.com/suanmei/callapp-lib?tab=readme-ov-file">suanmei/callapp-lib: 🔥call app from h5（H5唤起客户端 ）</a></li><li><a href=https://suanmei.github.io/2018/08/23/h5_call_app/>H5唤起APP指南 | 拾壹小筑</a></li></ul><h3 id=app-links>app links</h3><ul><li><a href=https://blog.csdn.net/weixin_38754349/article/details/107724355>Android DEPPLINK、APPLink 原理简析-CSDN博客</a></li><li><a href=https://blog.csdn.net/wupinlong/article/details/109953480>uniApp实现h5页面唤醒app_h5 打开uniapp-CSDN博客</a></li><li><a href=https://ask.dcloud.net.cn/question/100042>ios配置完universal links，如何通过universal links跳转到APP内指定页面？ - DCloud问答</a></li><li><a href=https://ask.dcloud.net.cn/question/95040>【报Bug】IOS下plus.runtime.arguments不能获取到URL Scheme协议参数【已解决】 - DCloud问答</a></li><li><a href=https://ask.dcloud.net.cn/article/36721>面试官：同学，说说 Applink 的使用以及原理 - DCloud问答</a></li><li><a href="https://developer.android.com/training/app-links?hl=zh-cn">处理 Android 应用链接  |  Android 开发者  |  Android Developers</a></li><li><a href=https://zarah.dev/2022/02/08/android12-deeplinks.html>Debugging App Links in Android 12 🔗</a></li><li><a href="https://developers.google.com/digital-asset-links/tools/generator?hl=zh-cn">语句列表生成器和测试器  |  Google Digital Asset Links  |  Google for Developers</a></li><li><a href="https://developer.android.com/studio/write/app-link-indexing?hl=zh-cn">添加 Android App Links  |  Android Studio  |  Android Developers</a></li><li><a href=https://blog.51cto.com/u_16099183/7065726>android app links android app links 自动验证失效 1024_mob6454cc63f2dd的技术博客_51CTO博客</a></li><li><a href=https://lleohao.github.io/2020/11/12/Web%20%E9%A1%B5%E9%9D%A2%E8%B0%83%E7%94%A8%20APP%20%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93/>Web 页面打开 APP 方式总结 | Lleo</a></li><li><a href=https://blog.csdn.net/fox_wei_hlz/article/details/102471312>Android的Applink原理解析-8.0源码-CSDN博客</a></li><li><a href="https://open.oppomobile.com/bbs/forum.php?mod=viewthread&amp;tid=5205&amp;extra=page%3D1&amp;aid=46131">Oppo手机无法支持deeplink ，applink唤起应用的问题 - 适配支持 - 开发者社区</a></li><li><a href=https://zhuanlan.zhihu.com/p/37303948>一切为了运营！如何从推广短信链接唤起 App？ - 知乎</a></li><li><a href=https://www.jianshu.com/p/213557eba7a3>Android 通过短信跳转到特定 App &ndash; Android App Links - 简书</a></li></ul><h3 id=url-scheme>url scheme</h3><ul><li><a href=https://uniapp.dcloud.net.cn/tutorial/app-android-schemes.html#>app-android-schemes - uni-app官网</a></li><li><a href="https://www.google.com/search?q=UrlSchemes+H5+%E5%AE%89%E5%8D%93+%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80&amp;newwindow=1&amp;sca_esv=556959823&amp;biw=1888&amp;bih=937&amp;ei=L9LaZKrHIafy0PEPuZaHiAE&amp;ved=0ahUKEwjqmriNv92AAxUnOTQIHTnLAREQ4dUDCA8&amp;uact=5&amp;oq=UrlSchemes+H5+%E5%AE%89%E5%8D%93+%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80&amp;gs_lp=Egxnd3Mtd2l6LXNlcnAiIVVybFNjaGVtZXMgSDUg5a6J5Y2TIOaXoOazleaJk-W8gDIJECEYoAEYChgqMgcQIRigARgKMgcQIRigARgKSMpXUKMGWJJRcAl4AJABAJgBiQSgAY8zqgEJMi05LjguMS4yuAEDyAEA-AEBwgIKEAAYCBgeGA0YCsICCBAAGAgYHhgNwgIIEAAYiQUYogTCAgUQABiiBOIDBBgBIEGIBgE&amp;sclient=gws-wiz-serp">UrlSchemes H5 安卓 无法打开 - Google 搜索</a></li><li><a href=https://ask.dcloud.net.cn/question/65867>uni-app的H5如何跳转到App - DCloud问答</a></li><li><a href=https://www.jianshu.com/p/21380058d609>H5页面唤起指定app或跳转到应用市场 - 简书</a></li><li><a href=https://ask.dcloud.net.cn/question/83564>【报Bug】uni-app小米手机无法唤起app - DCloud问答</a></li><li><a href=https://ask.dcloud.net.cn/question/175893>android 配置的schemes不起作用唤醒不了 - DCloud问答</a></li><li><a href=https://ask.dcloud.net.cn/question/47639>URL schemes 按官方文档设置无效 - DCloud问答</a></li><li><a href=https://ask.dcloud.net.cn/question/157732>关于h5的安卓跳转app的UrlSchemes问题 - DCloud问答</a></li><li><a href=https://ask.dcloud.net.cn/question/118293>uniapp UrlSchemes配置 完成后使用浏览器无法打开 - DCloud问答</a></li><li><a href=https://blog.csdn.net/hwb04160011/article/details/106443382>Android配置Scheme使用浏览器唤起APP的方式，以及不生效问题解决-CSDN博客</a></li><li><a href=https://blog.csdn.net/xiaohui_brook/article/details/113241717>uni-app项目Android离线打包UrlSchemes设置_uniapp离线打包配置scheme-CSDN博客</a></li></ul><h3 id=test>test</h3><ul><li><a href=https://answers.netlify.com/t/well-known-gets-ignored/44897>.well-known gets ignored - Support - Netlify Support Forums</a></li><li><a href=https://answers.netlify.com/t/how-to-add-a-well-known-folder-to-my-website/28149>How to add a .well-known folder to my website - Support - Netlify Support Forums</a></li><li><a href=https://app-links.dc1979.com/.well-known/assetlinks.json>app-links.dc1979.com/.well-known/assetlinks.json</a></li><li><a href=https://signal.group/.well-known/assetlinks.json>signal.group/.well-known/assetlinks.json</a></li><li><a href=https://ws-srv.glitch.me/app-links.html>Android App</a></li></ul><h2 id=ios-上短信链接拉起微信小程序>iOS 上短信链接拉起微信小程序</h2><p>测试短信：【嘉里建设】首页 <a href=https://wxaurl.cn/NAuYl9Mi2wo>https://wxaurl.cn/NAuYl9Mi2wo</a></p><p>文档：https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/sms.html</p><p>看起来混合利用了 Universal Links 和 Url Scheme。</p><hr width=100% id=EOF><p style=color:#777>Last modified on 2023-08-15</p></div></div><nav class=post-pagination><a class=newer-posts href=/tech-blog/posts/20231103-typescript_cookbook_2023_book_notes/>Next<br>读书笔记：OReilly.TypeScript.Cookbook.2023.8.epub
</a><a class=older-posts href=/tech-blog/posts/20230720-mp_alipay_navigation-bar/>Previous<br>支付宝小程序导航栏自定义方案</a></nav><div class=post-comment-wrapper><p style=opacity:.6 align=center><small>Comments Disabled.</small></p></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://joelz.github.io/tech-blog/><div class=nav-title>Notes by Joel</div><div class=nav-subtitle>Bytes and Bits, Piece by Piece.</div></a><div class=nav-link-list><a class="a-block nav-link-item active" href=/tech-blog/posts>Archive
</a><a class="a-block nav-link-item false" href=/tech-blog/categories>Categories
</a><a class="a-block nav-link-item false" href=/tech-blog/tags>Tags
</a><a class="a-block nav-link-item false" href=/tech-blog/index.xml>RSS Feed</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copy, right? 🤔</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#%e9%9c%80%e6%b1%82 class=nav-需求>需求</a></li><li><a href=#%e7%bb%93%e8%ae%ba class=nav-结论>结论</a></li><li><a href=#ios-%e6%b5%8b%e8%af%95%e7%bb%93%e6%9e%9c class=nav-ios-测试结果>iOS 测试结果</a></li><li><a href=#android-%e6%b5%8b%e8%af%95%e7%bb%93%e6%9e%9c class=nav-android-测试结果>Android 测试结果</a></li><li><a href=#uniapp-%e4%bb%a3%e7%a0%81 class=nav-uniapp-代码>uniapp 代码</a></li><li><a href=#links class=nav-links>links</a></li><ul><li><a href=#%e5%bf%85%e8%af%bb class=nav-必读>必读</a></li><li><a href=#app-links class=nav-app-links>app links</a></li><li><a href=#url-scheme class=nav-url-scheme>url scheme</a></li><li><a href=#test class=nav-test>test</a></li></ul><li><a href=#ios-%e4%b8%8a%e7%9f%ad%e4%bf%a1%e9%93%be%e6%8e%a5%e6%8b%89%e8%b5%b7%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f class=nav-ios-上短信链接拉起微信小程序>iOS 上短信链接拉起微信小程序</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up
</i></a><a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copy, right? 🤔</div></div><script src=/tech-blog/js/journal.js></script></body></html>