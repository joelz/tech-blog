<!doctype html><html><head><title>å°ç¨‹åºåŠAppå†…åµŒH5</title>
<meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content="å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºå’Œ App ä¸­ webview å†…åµŒ H5 çš„ä¸€äº›é—®é¢˜ã€‚"><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><meta property="og:url" content="https://joelz.github.io/tech-blog/posts/20220418-weixin_mp_webview/"><meta property="og:site_name" content="Notes by Joel"><meta property="og:title" content="å°ç¨‹åºåŠAppå†…åµŒH5"><meta property="og:description" content="å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºå’Œ App ä¸­ webview å†…åµŒ H5 çš„ä¸€äº›é—®é¢˜ã€‚"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-18T12:01:58+08:00"><meta property="article:modified_time" content="2022-04-18T12:01:58+08:00"><meta property="article:tag" content="Mp-Weixin"><meta property="article:tag" content="Mp-Alipay"><meta property="article:tag" content="App"><meta name=twitter:card content="summary"><meta name=twitter:title content="å°ç¨‹åºåŠAppå†…åµŒH5"><meta name=twitter:description content="å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºå’Œ App ä¸­ webview å†…åµŒ H5 çš„ä¸€äº›é—®é¢˜ã€‚"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","abcdefghzd")</script><script src=/tech-blog/js/toc.js></script><link type=text/css rel=stylesheet href=/tech-blog/vendor/css/bootstrap.min.css><link rel=stylesheet href=/tech-blog/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=/tech-blog/posts>Archive
</a><a class="a-block drawer-menu-item false" href=/tech-blog/categories>Categories
</a><a class="a-block drawer-menu-item false" href=/tech-blog/tags>Tags
</a><a class="a-block drawer-menu-item false" href=/tech-blog/index.xml>RSS Feed</a><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%86%85%e5%b5%8c-h5 class=nav-å¾®ä¿¡å°ç¨‹åºå†…åµŒ-h5>å¾®ä¿¡å°ç¨‹åºå†…åµŒ H5</a></li><ul><li><a href=#%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6 class=nav-é€šä¿¡æœºåˆ¶>é€šä¿¡æœºåˆ¶</a></li><ul><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%90%91-h5-%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-å¾®ä¿¡å°ç¨‹åºå‘-h5-å‘é€æ¶ˆæ¯>å¾®ä¿¡å°ç¨‹åºå‘ H5 å‘é€æ¶ˆæ¯</a></li><li><a href=#h5-%e5%90%91%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-h5-å‘å¾®ä¿¡å°ç¨‹åºå‘é€æ¶ˆæ¯>H5 å‘å¾®ä¿¡å°ç¨‹åºå‘é€æ¶ˆæ¯</a></li></ul><li><a href=#%e4%b8%8d%e8%b6%b3 class=nav-ä¸è¶³>ä¸è¶³</a></li><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5 class=nav-å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</a></li></ul><li><a href=#app%e5%86%85%e5%b5%8c-h5 class=nav-appå†…åµŒ-h5>Appå†…åµŒ H5</a></li><ul><li><a href=#%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6-1 class=nav-é€šä¿¡æœºåˆ¶-1>é€šä¿¡æœºåˆ¶</a></li><ul><li><a href=#app%e5%90%91-h5-%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-appå‘-h5-å‘é€æ¶ˆæ¯>Appå‘ H5 å‘é€æ¶ˆæ¯</a></li><li><a href=#h5-%e5%90%91app%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-h5-å‘appå‘é€æ¶ˆæ¯>H5 å‘Appå‘é€æ¶ˆæ¯</a></li><li><a href=#web-view-%e5%8a%a0%e8%bd%bd%e7%9a%84-html-%e4%b8%ad%e5%8f%af%e4%bb%a5%e8%b0%83%e7%94%a8html--5-%e7%9a%84%e8%83%bd%e5%8a%9b class=nav-web-view-åŠ è½½çš„-html-ä¸­å¯ä»¥è°ƒç”¨html--5-çš„èƒ½åŠ›>web-view åŠ è½½çš„ HTML ä¸­å¯ä»¥è°ƒç”¨html 5+ çš„èƒ½åŠ›</a></li></ul><li><a href=#%e4%b8%8d%e8%b6%b3-1 class=nav-ä¸è¶³-1>ä¸è¶³</a></li><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5-1 class=nav-å‚è€ƒé“¾æ¥-1>å‚è€ƒé“¾æ¥</a></li></ul><li><a href=#%e6%94%af%e4%bb%98%e5%ae%9d%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%86%85%e5%b5%8c-h5 class=nav-æ”¯ä»˜å®å°ç¨‹åºå†…åµŒ-h5>æ”¯ä»˜å®å°ç¨‹åºå†…åµŒ H5</a></li><ul><li><a href=#%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6-2 class=nav-é€šä¿¡æœºåˆ¶-2>é€šä¿¡æœºåˆ¶</a></li><ul><li><a href=#h5-%e7%ab%af%e4%bb%a3%e7%a0%81 class=nav-h5-ç«¯ä»£ç >H5 ç«¯ä»£ç </a></li><li><a href=#%e6%94%af%e4%bb%98%e5%ae%9d%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%bb%a3%e7%a0%81uniapp class=nav-æ”¯ä»˜å®å°ç¨‹åºä»£ç uniapp>æ”¯ä»˜å®å°ç¨‹åºä»£ç ï¼ˆuniappï¼‰</a></li></ul><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5-2 class=nav-å‚è€ƒé“¾æ¥-2>å‚è€ƒé“¾æ¥</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu
</i></button>
<a id=navTitle class=navbar-brand href=https://joelz.github.io/tech-blog/>Notes by Joel
</a><button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://joelz.github.io/tech-blog/><div class=single-column-header-title>Notes by Joel</div><div class=single-column-header-subtitle>Bytes and Bits, Piece by Piece.</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper style=background-image:url(https://joelz.github.io/tech-blog/images/notebook.jpg)><div class=post-title>å°ç¨‹åºåŠAppå†…åµŒH5<div class=post-subtitle>å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºå’Œ App ä¸­ webview å†…åµŒ H5 çš„ä¸€äº›é—®é¢˜ã€‚</div><div class=post-meta><time itemprop=datePublished>2022-04-18 12:01
</time><i class=material-icons>folder</i>
<a href=/categories/web>web</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/mp-weixin>mp-weixin</a>
&nbsp;
<a href=/tags/mp-alipay>mp-alipay</a>
&nbsp;
<a href=/tags/app>app</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><h2 id=å¾®ä¿¡å°ç¨‹åºå†…åµŒ-h5>å¾®ä¿¡å°ç¨‹åºå†…åµŒ H5</h2><h3 id=é€šä¿¡æœºåˆ¶>é€šä¿¡æœºåˆ¶</h3><h4 id=å¾®ä¿¡å°ç¨‹åºå‘-h5-å‘é€æ¶ˆæ¯>å¾®ä¿¡å°ç¨‹åºå‘ H5 å‘é€æ¶ˆæ¯</h4><ol><li>URL search ä¼ å‚ï¼šåœ¨ H5 åˆå§‹åŠ è½½æ—¶ï¼Œé€šå¸¸ä¼šå¸¦ä¸Šç”¨æˆ·çš„ç™»å½•æ€ä½œä¸ºå‚æ•°ï¼Œä½¿ H5 å¯ä»¥ç»§ç»­ä¸åå°äº¤äº’ã€‚ç±»ä¼¼ <code>https://example.com/h5.html?token=SGVsbG9Xb3JkIQ==</code></li><li>URL hash ä¼ å‚ï¼šåœ¨ H5 æµè§ˆæœŸé—´ï¼Œå¯ä»¥ åˆ©ç”¨ç½‘é¡µ URL ä¸­çš„ hash éƒ¨åˆ†æ”¹å˜ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡æ–°åŠ è½½çš„ç‰¹ç‚¹ï¼Œå®ç°å°ç¨‹åºå‘ H5 å‘é€æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼š<a href=https://ask.dcloud.net.cn/question/125195>ã€æŠ¥Bugã€‘UNIAPP H5ä¿®æ”¹hashæ¨¡å¼çš„URLå‚æ•°ä¼šå¯¼è‡´é¡µé¢é‡è½½ï¼Œä»¥å‰æ—§çš„hbx2.8.11æ˜¯ä¸ä¼šé‡è½½çš„ - DCloudé—®ç­”</a></li><li>websocket</li></ol><h4 id=h5-å‘å¾®ä¿¡å°ç¨‹åºå‘é€æ¶ˆæ¯>H5 å‘å¾®ä¿¡å°ç¨‹åºå‘é€æ¶ˆæ¯</h4><ol><li>postMessageï¼šå°ç¨‹åºå†…åµŒ H5 å¯ä»¥ä½¿ç”¨ JSSDK å‘å°ç¨‹åºå‘é€æ¶ˆæ¯ã€‚<strong>ç½‘é¡µå‘å°ç¨‹åº postMessage æ—¶ï¼Œåªä¼šåœ¨ç‰¹å®šæ—¶æœºï¼ˆå°ç¨‹åºåé€€ã€ç»„ä»¶é”€æ¯ã€åˆ†äº«ï¼‰è§¦å‘å¹¶æ”¶åˆ°æ¶ˆæ¯ï¼Œä¸æ˜¯å®æ—¶è§¦å‘ã€‚e.detail = { data }ï¼Œdataæ˜¯å¤šæ¬¡ postMessage çš„å‚æ•°ç»„æˆçš„æ•°ç»„</strong></li><li>è·¯ç”±ä¼ å‚ï¼šåœ¨ä½¿ç”¨ JSSDK è°ƒèµ·å°ç¨‹åºé¡µé¢æ—¶ï¼Œå¯ä»¥é€šè¿‡åœ¨é¡µé¢è·¯å¾„åæºå¸¦å‚æ•°çš„æ–¹å¼é€šä¿¡ã€‚ç±»ä¼¼ <code>wx.miniProgram.navigateTo({ url: '/path/to/page?foo=bar' })</code></li><li>websocket</li></ol><h3 id=ä¸è¶³>ä¸è¶³</h3><ol><li>å¯¹äºéœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½ä½¿ç”¨çš„å°ç¨‹åºèƒ½åŠ›ï¼ˆæ¯”å¦‚åˆ†äº«ï¼Œè·å–ç”¨æˆ·æ‰‹æœºå·ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œè·å–ç”¨æˆ·å¤´åƒï¼Œè®¢é˜…æ¶ˆæ¯ç­‰ï¼‰ï¼Œéœ€è¦è·³è½¬é¡µé¢</li><li>WebView é¡µé¢çš„å¯¼èˆªæ åªèƒ½å›ºå®šç”¨é»˜è®¤çš„ç™½åº•é»‘å­—é£æ ¼</li></ol><h3 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h3><ul><li><a href=https://ymcai.xyz/posts/202107021145.html>å¾®ä¿¡å°ç¨‹åºæ··åˆå¼€å‘ç¬”è®°</a></li><li><a href=https://blog.csdn.net/choutian5268/article/details/100810817>å¾®ä¿¡å°ç¨‹åº+webview+vueæ··åˆå¼€å‘ ä¼ å€¼è¸©å‘_choutian5268çš„åšå®¢-CSDNåšå®¢</a></li><li><a href=https://ask.dcloud.net.cn/question/125195>ã€æŠ¥Bugã€‘UNIAPP H5ä¿®æ”¹hashæ¨¡å¼çš„URLå‚æ•°ä¼šå¯¼è‡´é¡µé¢é‡è½½ï¼Œä»¥å‰æ—§çš„hbx2.8.11æ˜¯ä¸ä¼šé‡è½½çš„ - DCloudé—®ç­”</a>
<a href=https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html>- web-view | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£</a></li></ul><h2 id=appå†…åµŒ-h5>Appå†…åµŒ H5</h2><h3 id=é€šä¿¡æœºåˆ¶-1>é€šä¿¡æœºåˆ¶</h3><h4 id=appå‘-h5-å‘é€æ¶ˆæ¯>Appå‘ H5 å‘é€æ¶ˆæ¯</h4><ol><li><a href=https://www.html5plus.org/doc/zh_cn/webview.html#plus.webview.WebviewObject.evalJS>evalJS</a>ï¼š</li></ol><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#c678dd>const</span> <span style=color:#c1abea>js</span> <span style=color:#c7bf54>=</span>
</span></span><span style=display:flex><span>  <span style=color:#98c379>`window.settlePromise(&#39;resolve&#39;,`</span> <span style=color:#c7bf54>+</span>
</span></span><span style=display:flex><span>  <span style=color:#98c379>`&#39;</span><span style=color:#98c379>${</span><span style=color:#c1abea>res</span>.<span style=color:#c1abea>detail</span>.<span style=color:#c1abea>data</span>[<span style=color:#d19a66>0</span>].<span style=color:#c1abea>data</span>.<span style=color:#c1abea>paymentSessionId</span><span style=color:#98c379>}</span><span style=color:#98c379>&#39;,`</span> <span style=color:#c7bf54>+</span>
</span></span><span style=display:flex><span>  <span style=color:#98c379>`&#39;</span><span style=color:#98c379>${</span><span style=color:#c1abea>JSON</span>.<span style=color:#c1abea>stringify</span>(<span style=color:#c1abea>result</span>)<span style=color:#98c379>}</span><span style=color:#98c379>&#39;)`</span>;
</span></span><span style=display:flex><span>  (<span style=color:#c678dd>this</span>.<span style=color:#c1abea>webview</span> <span style=color:#c678dd>as</span> <span style=color:#ef8383>any</span>).<span style=color:#c1abea>evalJS</span>(<span style=color:#c1abea>js</span>);
</span></span></code></pre></td></tr></table></div></div><h4 id=h5-å‘appå‘é€æ¶ˆæ¯>H5 å‘Appå‘é€æ¶ˆæ¯</h4><ol><li>uni.webView.postMessageï¼šç½‘é¡µå‘åº”ç”¨å‘é€æ¶ˆæ¯ï¼Œåœ¨ web-view çš„ message äº‹ä»¶å›è°ƒ event.detail.data ä¸­æ¥æ”¶æ¶ˆæ¯ã€‚å®æ—¶è§¦å‘ã€‚</li></ol><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span>(<span style=color:#c1abea>uni</span> <span style=color:#c678dd>as</span> <span style=color:#ef8383>any</span>).<span style=color:#c1abea>webView</span>.<span style=color:#c1abea>postMessage</span>({
</span></span><span style=display:flex><span>      <span style=color:#c1abea>data</span><span style=color:#c7bf54>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#c1abea>action</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;PAY&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#c1abea>data</span><span style=color:#c7bf54>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#c1abea>payOption</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;WECHATPAY&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#c1abea>paymentSessionId</span>: <span style=color:#ef8383>sessionId</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span></code></pre></td></tr></table></div></div><h4 id=web-view-åŠ è½½çš„-html-ä¸­å¯ä»¥è°ƒç”¨html--5-çš„èƒ½åŠ›>web-view åŠ è½½çš„ HTML ä¸­å¯ä»¥è°ƒç”¨html 5+ çš„èƒ½åŠ›</h4><p>æ¯”å¦‚HTML5+ ä¸­çš„ <a href=https://www.html5plus.org/doc/zh_cn/barcode.html>æ‰«ç </a></p><h3 id=ä¸è¶³-1>ä¸è¶³</h3><ol><li>iOS App ä¾§æ»‘ä¼šå…³é—­æ•´ä¸ªwebview</li></ol><ul><li><a href=https://ask.dcloud.net.cn/question/101333>uniappå¦‚ä½•ç›‘å¬æˆ–è€…çŸ¥é“ioså·¦æ»‘è¿”å›äº‹ä»¶ï¼Ÿ - DCloudé—®ç­”</a></li><li><a href=https://ask.dcloud.net.cn/article/35120>uni-appè‡ªå®šä¹‰è¿”å›é€»è¾‘æ•™ç¨‹ - DCloudé—®ç­”</a></li></ul><h3 id=å‚è€ƒé“¾æ¥-1>å‚è€ƒé“¾æ¥</h3><ul><li><a href=https://uniapp.dcloud.io/component/web-view.html>web-view | uni-appå®˜ç½‘</a></li><li><a href=https://www.html5plus.org/doc/zh_cn/webview.html#plus.webview.WebviewObject.evalJS>evalJS - HTML5+ API Reference</a></li></ul><h2 id=æ”¯ä»˜å®å°ç¨‹åºå†…åµŒ-h5>æ”¯ä»˜å®å°ç¨‹åºå†…åµŒ H5</h2><h3 id=é€šä¿¡æœºåˆ¶-2>é€šä¿¡æœºåˆ¶</h3><p>å¾ˆæ–¹ä¾¿ï¼Œæ”¯æŒåŒå‘å³æ—¶é€šä¿¡ã€‚</p><h4 id=h5-ç«¯ä»£ç >H5 ç«¯ä»£ç </h4><p>é¦–å…ˆéœ€è¦åœ¨ <code>index.html</code> ä¸­å¼•å…¥ js sdkï¼š</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>  &lt;<span style=color:#e06c75>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span> (<span style=color:#c1abea>navigator</span>.<span style=color:#c1abea>userAgent</span>.<span style=color:#c1abea>indexOf</span>(<span style=color:#98c379>&#39;AliApp&#39;</span>) <span style=color:#c7bf54>&gt;</span> <span style=color:#c7bf54>-</span><span style=color:#d19a66>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ef8383>document</span>.<span style=color:#c1abea>writeln</span>(<span style=color:#98c379>&#39;&lt;script src=&#34;https://appx/web-view.min.js&#34;&#39;</span> <span style=color:#c7bf54>+</span> <span style=color:#98c379>&#39;&gt;&#39;</span> <span style=color:#c7bf54>+</span> <span style=color:#98c379>&#39;&lt;&#39;</span> <span style=color:#c7bf54>+</span> <span style=color:#98c379>&#39;/&#39;</span> <span style=color:#c7bf54>+</span> <span style=color:#98c379>&#39;script&gt;&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  &lt;/<span style=color:#e06c75>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#e06c75>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// ç½‘é¡µå‘å°ç¨‹åº postMessage æ¶ˆæ¯
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>    <span style=color:#8a93a5;font-style:italic>// my.postMessage({ name: &#34;æµ‹è¯•web-view&#34; });
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>    <span style=color:#8a93a5;font-style:italic>// æ¥æ”¶æ¥è‡ªå°ç¨‹åºçš„æ¶ˆæ¯ã€‚
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>    <span style=color:#c1abea>my</span>.<span style=color:#c1abea>onMessage</span> <span style=color:#c7bf54>=</span> <span style=color:#c678dd>function</span> (<span style=color:#c1abea>e</span>) {
</span></span><span style=display:flex><span>      <span style=color:#c1abea>console</span>.<span style=color:#c1abea>log</span>(<span style=color:#98c379>&#39;message from webview: &#39;</span>,<span style=color:#c1abea>e</span>); <span style=color:#8a93a5;font-style:italic>// {&#39;sendToWebView&#39;: &#39;1&#39;}
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>    }
</span></span><span style=display:flex><span>  &lt;/<span style=color:#e06c75>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ vue é¡µé¢ä¸­å‘é€æ¶ˆæ¯ï¼š</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#e06c75>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#e06c75>view</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#e06c75>button</span> <span style=color:#e06c75>@click</span><span style=color:#98c379>=&#34;send&#34;</span>&gt;<span style=color:#b3d23c>Send</span>&lt;/<span style=color:#e06c75>button</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#e06c75>view</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#e06c75>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#e06c75>script</span>&gt;
</span></span><span style=display:flex><span>	<span style=color:#c678dd>export</span> <span style=color:#c678dd>default</span> {
</span></span><span style=display:flex><span>		<span style=color:#c1abea>methods</span><span style=color:#c7bf54>:</span> {
</span></span><span style=display:flex><span>			<span style=color:#c1abea>send</span><span style=color:#c7bf54>:</span> <span style=color:#c678dd>function</span> () {
</span></span><span style=display:flex><span>                <span style=color:#c1abea>my</span>.<span style=color:#c1abea>postMessage</span>({<span style=color:#c1abea>name</span><span style=color:#c7bf54>:</span><span style=color:#63c381>&#34;æµ‹è¯•web-view&#34;</span>, <span style=color:#c1abea>time</span><span style=color:#c7bf54>:</span> (<span style=color:#c678dd>new</span> <span style=color:#ef8383>Date</span>()).<span style=color:#c1abea>toString</span>()});
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>&lt;/<span style=color:#e06c75>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><h4 id=æ”¯ä»˜å®å°ç¨‹åºä»£ç uniapp>æ”¯ä»˜å®å°ç¨‹åºä»£ç ï¼ˆuniappï¼‰</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">50
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#e06c75>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#e06c75>view</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#e06c75>web-view</span> <span style=color:#b3d23c>id</span><span style=color:#c7bf54>=</span><span style=color:#98c379>&#34;web-view-1&#34;</span> <span style=color:#e06c75>:src</span><span style=color:#c7bf54>=</span><span style=color:#98c379>&#34;url&#34;</span> <span style=color:#e06c75>@message</span><span style=color:#98c379>=&#34;onmessage&#34;</span>&gt;&lt;/<span style=color:#b3d23c>web</span><span style=color:#e06c75>-view</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#e06c75>view</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#e06c75>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#e06c75>script</span>&gt;
</span></span><span style=display:flex><span>	<span style=color:#c678dd>var</span> <span style=color:#c1abea>app</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>getApp</span>()
</span></span><span style=display:flex><span>	<span style=color:#c678dd>export</span> <span style=color:#c678dd>default</span> {
</span></span><span style=display:flex><span>		<span style=color:#c1abea>data</span>() {
</span></span><span style=display:flex><span>			<span style=color:#c678dd>return</span> {
</span></span><span style=display:flex><span>				<span style=color:#c1abea>url</span><span style=color:#c7bf54>:</span><span style=color:#98c379>&#39;&#39;</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		<span style=color:#c1abea>onLoad</span><span style=color:#c7bf54>:</span> <span style=color:#c678dd>function</span>(<span style=color:#c1abea>options</span>) {
</span></span><span style=display:flex><span>			<span style=color:#c678dd>this</span>.<span style=color:#c1abea>url</span> <span style=color:#c7bf54>=</span> <span style=color:#ef8383>decodeURIComponent</span>(<span style=color:#c1abea>options</span>.<span style=color:#c1abea>url</span>)
</span></span><span style=display:flex><span>			<span style=color:#c1abea>setTimeout</span>(() =&gt; {
</span></span><span style=display:flex><span>				<span style=color:#8a93a5;font-style:italic>// å¾€ webview h5 å‘é€ä¸€æ¡æ¶ˆæ¯
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>				<span style=color:#c678dd>const</span> <span style=color:#c1abea>webViewContext</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>my</span>.<span style=color:#c1abea>createWebViewContext</span>(<span style=color:#98c379>&#39;web-view-1&#39;</span>);
</span></span><span style=display:flex><span>				<span style=color:#c1abea>webViewContext</span>.<span style=color:#c1abea>postMessage</span>({
</span></span><span style=display:flex><span>				  <span style=color:#98c379>&#39;event&#39;</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;onLoad&#39;</span>,
</span></span><span style=display:flex><span>				   <span style=color:#98c379>&#39;time&#39;</span><span style=color:#c7bf54>:</span> (<span style=color:#c678dd>new</span> <span style=color:#ef8383>Date</span>()).<span style=color:#c1abea>toString</span>()
</span></span><span style=display:flex><span>				});
</span></span><span style=display:flex><span>			}, <span style=color:#d19a66>1000</span><span style=color:#c7bf54>*</span><span style=color:#d19a66>10</span>);
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		<span style=color:#c1abea>onShareAppMessage</span>(<span style=color:#c1abea>options</span>) {
</span></span><span style=display:flex><span>		    <span style=color:#c1abea>my</span>.<span style=color:#c1abea>alert</span>({ <span style=color:#c1abea>content</span><span style=color:#c7bf54>:</span> <span style=color:#c1abea>JSON</span>.<span style=color:#c1abea>stringify</span>(<span style=color:#c1abea>options</span>.<span style=color:#c1abea>webViewUrl</span>) });
</span></span><span style=display:flex><span>		    <span style=color:#c678dd>return</span> {
</span></span><span style=display:flex><span>		      <span style=color:#c1abea>title</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;åˆ†äº« web-View ç»„ä»¶&#39;</span>,
</span></span><span style=display:flex><span>		      <span style=color:#c1abea>desc</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;View ç»„ä»¶å¾ˆé€šç”¨&#39;</span>,
</span></span><span style=display:flex><span>		      <span style=color:#c1abea>path</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;page/component/component-pages/webview/baidu&#39;</span>,
</span></span><span style=display:flex><span>		      <span style=color:#98c379>&#39;web-view&#39;</span><span style=color:#c7bf54>:</span> <span style=color:#c1abea>options</span>.<span style=color:#c1abea>webViewUrl</span>,
</span></span><span style=display:flex><span>		    };
</span></span><span style=display:flex><span>		  },
</span></span><span style=display:flex><span>		<span style=color:#c1abea>methods</span><span style=color:#c7bf54>:</span> {
</span></span><span style=display:flex><span>			<span style=color:#8a93a5;font-style:italic>// æ¥æ”¶ä» webview h5 å‘æ¥çš„æ¶ˆæ¯
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>			<span style=color:#c1abea>onmessage</span>(<span style=color:#c1abea>e</span>) {
</span></span><span style=display:flex><span>				<span style=color:#c1abea>console</span>.<span style=color:#c1abea>log</span>(<span style=color:#98c379>&#39;===&gt; message from webview h5:&#39;</span>,<span style=color:#c1abea>e</span>)
</span></span><span style=display:flex><span>				<span style=color:#c1abea>setTimeout</span>(()=&gt;{
</span></span><span style=display:flex><span>					<span style=color:#8a93a5;font-style:italic>// 5 ç§’åå†å¾€ webview h5 å‘é€ä¸€æ¡æ¶ˆæ¯
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>					<span style=color:#c678dd>const</span> <span style=color:#c1abea>webViewContext</span> <span style=color:#c7bf54>=</span> <span style=color:#c1abea>my</span>.<span style=color:#c1abea>createWebViewContext</span>(<span style=color:#98c379>&#39;web-view-1&#39;</span>);
</span></span><span style=display:flex><span>					<span style=color:#c1abea>webViewContext</span>.<span style=color:#c1abea>postMessage</span>({
</span></span><span style=display:flex><span>					  <span style=color:#98c379>&#39;sendToWebView&#39;</span><span style=color:#c7bf54>:</span> <span style=color:#98c379>&#39;1&#39;</span>,
</span></span><span style=display:flex><span>					   <span style=color:#98c379>&#39;time&#39;</span><span style=color:#c7bf54>:</span> (<span style=color:#c678dd>new</span> <span style=color:#ef8383>Date</span>()).<span style=color:#c1abea>toString</span>()
</span></span><span style=display:flex><span>					});
</span></span><span style=display:flex><span>				},<span style=color:#d19a66>1000</span><span style=color:#c7bf54>*</span><span style=color:#d19a66>5</span>);
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>&lt;/<span style=color:#e06c75>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=å‚è€ƒé“¾æ¥-2>å‚è€ƒé“¾æ¥</h3><ul><li><a href=https://opendocs.alipay.com/mini/component/web-view>web-view H5 é¡µé¢æ‰¿è½½ - æ”¯ä»˜å®æ–‡æ¡£ä¸­å¿ƒ</a></li><li><a href=https://opendocs.alipay.com/mini/component/mg7rvg>web-view å¸¸è§é—®é¢˜ - æ”¯ä»˜å®æ–‡æ¡£ä¸­å¿ƒ</a></li><li><a href=https://uniapp.dcloud.net.cn/component/web-view.html#>web-view | uni-appå®˜ç½‘</a></li></ul><hr width=100% id=EOF><p style=color:#777>Last modified on 2022-04-18</p></div></div><nav class=post-pagination><a class=newer-posts href=/tech-blog/posts/20220429-iconfont/>Next<br>Iconfontä½¿ç”¨ç¬”è®°
</a><a class=older-posts href=/tech-blog/posts/20211208-vue_azure_ad_sso/>Previous<br>vue web app æ¥å…¥ Azure AD SSO</a></nav><div class=post-comment-wrapper><p style=opacity:.6 align=center><small>Comments Disabled.</small></p></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://joelz.github.io/tech-blog/><div class=nav-title>Notes by Joel</div><div class=nav-subtitle>Bytes and Bits, Piece by Piece.</div></a><div class=nav-link-list><a class="a-block nav-link-item active" href=/tech-blog/posts>Archive
</a><a class="a-block nav-link-item false" href=/tech-blog/categories>Categories
</a><a class="a-block nav-link-item false" href=/tech-blog/tags>Tags
</a><a class="a-block nav-link-item false" href=/tech-blog/index.xml>RSS Feed</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copy, right? ğŸ¤”</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%86%85%e5%b5%8c-h5 class=nav-å¾®ä¿¡å°ç¨‹åºå†…åµŒ-h5>å¾®ä¿¡å°ç¨‹åºå†…åµŒ H5</a></li><ul><li><a href=#%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6 class=nav-é€šä¿¡æœºåˆ¶>é€šä¿¡æœºåˆ¶</a></li><ul><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%90%91-h5-%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-å¾®ä¿¡å°ç¨‹åºå‘-h5-å‘é€æ¶ˆæ¯>å¾®ä¿¡å°ç¨‹åºå‘ H5 å‘é€æ¶ˆæ¯</a></li><li><a href=#h5-%e5%90%91%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-h5-å‘å¾®ä¿¡å°ç¨‹åºå‘é€æ¶ˆæ¯>H5 å‘å¾®ä¿¡å°ç¨‹åºå‘é€æ¶ˆæ¯</a></li></ul><li><a href=#%e4%b8%8d%e8%b6%b3 class=nav-ä¸è¶³>ä¸è¶³</a></li><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5 class=nav-å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</a></li></ul><li><a href=#app%e5%86%85%e5%b5%8c-h5 class=nav-appå†…åµŒ-h5>Appå†…åµŒ H5</a></li><ul><li><a href=#%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6-1 class=nav-é€šä¿¡æœºåˆ¶-1>é€šä¿¡æœºåˆ¶</a></li><ul><li><a href=#app%e5%90%91-h5-%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-appå‘-h5-å‘é€æ¶ˆæ¯>Appå‘ H5 å‘é€æ¶ˆæ¯</a></li><li><a href=#h5-%e5%90%91app%e5%8f%91%e9%80%81%e6%b6%88%e6%81%af class=nav-h5-å‘appå‘é€æ¶ˆæ¯>H5 å‘Appå‘é€æ¶ˆæ¯</a></li><li><a href=#web-view-%e5%8a%a0%e8%bd%bd%e7%9a%84-html-%e4%b8%ad%e5%8f%af%e4%bb%a5%e8%b0%83%e7%94%a8html--5-%e7%9a%84%e8%83%bd%e5%8a%9b class=nav-web-view-åŠ è½½çš„-html-ä¸­å¯ä»¥è°ƒç”¨html--5-çš„èƒ½åŠ›>web-view åŠ è½½çš„ HTML ä¸­å¯ä»¥è°ƒç”¨html 5+ çš„èƒ½åŠ›</a></li></ul><li><a href=#%e4%b8%8d%e8%b6%b3-1 class=nav-ä¸è¶³-1>ä¸è¶³</a></li><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5-1 class=nav-å‚è€ƒé“¾æ¥-1>å‚è€ƒé“¾æ¥</a></li></ul><li><a href=#%e6%94%af%e4%bb%98%e5%ae%9d%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%86%85%e5%b5%8c-h5 class=nav-æ”¯ä»˜å®å°ç¨‹åºå†…åµŒ-h5>æ”¯ä»˜å®å°ç¨‹åºå†…åµŒ H5</a></li><ul><li><a href=#%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6-2 class=nav-é€šä¿¡æœºåˆ¶-2>é€šä¿¡æœºåˆ¶</a></li><ul><li><a href=#h5-%e7%ab%af%e4%bb%a3%e7%a0%81 class=nav-h5-ç«¯ä»£ç >H5 ç«¯ä»£ç </a></li><li><a href=#%e6%94%af%e4%bb%98%e5%ae%9d%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%bb%a3%e7%a0%81uniapp class=nav-æ”¯ä»˜å®å°ç¨‹åºä»£ç uniapp>æ”¯ä»˜å®å°ç¨‹åºä»£ç ï¼ˆuniappï¼‰</a></li></ul><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5-2 class=nav-å‚è€ƒé“¾æ¥-2>å‚è€ƒé“¾æ¥</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up
</i></a><a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copy, right? ğŸ¤”</div></div><script src=/tech-blog/js/journal.js></script></body></html>